node('ie1tqabld02') 
{
	def msbuild = tool 'v15';
	
	stage('\u269B Build')
	{
		checkout scm
		bat 'nuget restore MenuCycle.Automation.sln'
		bat "\"${msbuild}\" MenuCycle.Automation.sln /p:Configuration=Chrome"
	}

	stage('\u2622 Test - Chrome')
	{
		bat 'nunit MenuCycle.Tests/bin/Chrome/MenuCycle.Tests.dll --result:TestResults/ChromeTestResults.xml;format=nunit2'
	}

	stage('Reporting')
    {
    	archiveArtifacts artifacts: 'TestResults/*.xml'
		nunit testResultsPattern: 'TestResults/*.xml'
		cucumber fileIncludePattern: 'Reports_*.json', jsonReportDirectory: 'MenuCycle.Tests/bin/**/Reports/'
    }
}